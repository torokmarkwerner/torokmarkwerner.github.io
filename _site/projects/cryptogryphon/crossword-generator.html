<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        

        
        TM | cryptogryphon | Create Your Own Crossword
        </title>
    
    <link rel="stylesheet" href="/projects/crossword-puzzle-generator/crossword-style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body>
    <div id="page-wrapper">
        <div id="background" style="opacity:0.8;width:100%;height:100%;background-color:black;top:0;left:0;position:fixed;display:none;z-index:2">
        </div>
        <div id="hamburger" onclick="openNav()">
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
        </div>
        <script>
        function openNav() {
            document.getElementById("sticky").style.transform = "translate3d(0, 0, 0)"
            document.getElementById("hamburger").style.display = "none"
            document.getElementById("background").style.display = "block"
        }

        function hideNav() {
            document.getElementById("sticky").style.transform = "translate3d(-100vw, 0, 0)"
            document.getElementById("hamburger").style.display = "block"
            document.getElementById("background").style.display = "none"
        }
        </script>
        <div id="sticky">
            <div id="close" onclick="hideNav()">&times;</div>
            <div style="display: inline-flex;vertical-align: bottom;"><img src="https://avatars.githubusercontent.com/u/98919050" /></div>
            <a id="about" class="pages-button" href="/about">ABOUT</a>
            <a id="projects" class="pages-button" href="/projects">PROJECTS</a>
            <a id="erettsegi" class="pages-button" href="/erettsegi">ÉRETTSÉGI</a>
            <a id="blog" class="pages-button" href="/blog">BLOG</a>
            <a id="contact" class="pages-button" href="/contact">CONTACT</a>
            <div style="text-align:center">
                <a href="https://www.facebook.com/torok.mark.werner" target="_blank" class="fa fa-facebook"></a>
                <a href="mailto:torokmarkwerner@gmail.com" target="_blank" class="fa fa-google"></a>
                <a href="https://www.linkedin.com/in/torok-mark-werner" target="_blank" class="fa fa-linkedin"></a>
            </div>
        </div>
        <script>
        //alert(document.location.pathname + " --> And this is the substring:" + document.location.pathname.toString().substring(1,document.location.pathname.toString().length-1)) --
        pages = document.getElementsByClassName("pages-button");
        for (i = 0; i < pages.length; i++) {
            if ((document.location.pathname).indexOf("/" + pages[i].id + "/") > -1) {
                pages[i].classList.toggle("pages-button-current");
                pages[i].style.backgroundColor = "palegreen";
                pages[i].style.fontWeight = "bold"
            }
        }
        </script>
        <div id="content-container">
            <h1 id="page-title">cryptogryphon | Create Your Own Crossword</h1>
                <ol id="how-to">
        <li>Enter a title along with a passcode.</li>
        <li>Add words and clues using the "Add word" button, and save your progress.</li>
        <li>When you're ready, click "Generate" to create a unique crossword puzzle.</li>
        <li>Share the generated link, optionally with a passcode, or print the crossword for offline enjoyment.</li>
    </ol>
    <img src="/projects/crossword-puzzle-generator/cryptogryphon-logo-2.svg">
    <div id="crossword-data">
        <div id="crossword-title">
            <label>Title</label>
            <input placeholder="Christmas">
        </div>
        <div id="crossword-passcode">
            <label>Passcode</label>
            <input placeholder="Christmas123!">
        </div>
    </div>
    <div id="crossword-import">
        <button onclick="showImportInModal()">Import words in JSON/CSV/TSV</button>
    </div>
    <div id="crossword-wordlist">
        <div class="word-clue">
            <div class="word" contenteditable="true" lang="en">cross</div>
            <div class="clue" contenteditable="true" lang="en">a mark, object, or figure formed by two short intersecting lines or pieces (+ or ×)</div>
            <button class="save-button"></button>
            <div class="crossword-word-clue-close" onclick="removeWordAndClue(this)">×</div>
        </div>
        <div class="word-clue">
            <div class="word" contenteditable="true" lang="en">word</div>
            <div class="clue" contenteditable="true" lang="en">a single distinct meaningful element of speech or writing</div>
            <button class="save-button"></button>
            <div class="crossword-word-clue-close" onclick="removeWordAndClue(this)">×</div>
        </div>
    </div>
    <div class="button-container">
        <button id="add-button">
            <div class="button-icon">⊕</div>
            <div class="button-caption">Add word</div>
        </button>
        <button id="generate-button">
            <div class="button-icon">
                <div id="generate-square"></div>
            </div>
            <div class="button-caption">Generate</div>
        </button>
    </div>
    <div id="crossword"></div>
    <script type="text/javascript">
    crossword = document.getElementById("crossword")

function removeWordAndClue(element) {
    element.parentElement.remove()
    save()
        }

    modalClose = document.createElement("DIV");
    modalClose.className = "modal-close";
    modalClose.innerHTML = "&times;";
    modalClose.addEventListener("click", function() { this.parentElement.parentElement.style.display = "none" })

    modalP = document.createElement("P");

    modalBox = document.createElement("DIV");
    modalBox.id = "score-modal";
    modalBox.className = "modal-box";

    modalBox.appendChild(modalClose);
    modalBox.appendChild(modalP);

    modalBasis = document.createElement("DIV");
    modalBasis.className = "modal-basis";

    modalBasis.appendChild(modalBox);

    if (document.getElementById("content-container")) {
        document.getElementById("content-container").appendChild(modalBasis);
    } else {
        document.body.appendChild(modalBasis)
    }


    wordAndClues = document.querySelectorAll(".word-clue");

    Array.from(wordAndClues).forEach(x => {

        x.querySelector(".word").addEventListener("focus", function() {
            x.querySelector(".save-button").classList.remove("saved")
        })

        x.querySelector(".clue").addEventListener("focus", function() {
            x.querySelector(".save-button").classList.remove("saved")
        })

    })

    Array.from(wordAndClues).forEach(x => {

        x.querySelector(".word").addEventListener("blur", function() { save() })

        x.querySelector(".clue").addEventListener("blur", function() { save() })

    })

    crosswordWordlist = document.getElementById("crossword-wordlist")

    function save(element) {
        element.classList.add("saved")
    }

    function save() {

        if (document.querySelector("#score-modal").querySelector("#import")) {
            document.querySelector("#score-modal").querySelector("#import").remove()
        }

        if (document.querySelector("#score-modal").querySelector("#crossword-passcode-submission")) {
            document.querySelector("#score-modal").querySelector("#crossword-passcode-submission").remove()
        }


        Array.from(document.querySelectorAll(".save-button")).forEach(x => x.classList.add("saved"))

        if (localStorage) {

            wordAndClues = document.querySelectorAll(".word-clue");

            title = document.getElementById("crossword-title").querySelector("input").value;
            passcode = document.getElementById("crossword-passcode").querySelector("input").value;

            input = {}

            for (i = 0; i < wordAndClues.length; i++) {
                word = wordAndClues[i].querySelector(".word").innerText;
                clue = wordAndClues[i].querySelector(".clue").innerText;
                if (word != "" && clue != "") {
                    input[word] = clue;
                }
            }

            localStorage.setItem("crosswordTitle", JSON.stringify(title))
            localStorage.setItem("crosswordInput", JSON.stringify(input))
            localStorage.setItem("crosswordPasscode", JSON.stringify(passcode))

        } else {
            crossword.innerHTML = ""
            document.querySelector("#score-modal").parentElement.style.display = "flex";
            document.querySelector("#score-modal p").style.display = "block";

            document.querySelector("#score-modal p").innerHTML = "Your browser does not support localStorage, your crossword was not saved."
        }
    }

    saveButtons = document.getElementsByClassName("save-button");
    for (i = 0; i < saveButtons.length; i++) {
        saveButtons[i].addEventListener("click", function() { save(this) })
    }

    addButton = document.getElementById("add-button");

    addButton.addEventListener("click", function() {
        for (i = 0; i < saveButtons.length; i++) {
            saveButtons[i].classList.add("saved")
        }

        save()

        newWordAndClue = document.createElement("DIV");
        newWordAndClue.className = "word-clue";

        newWord = document.createElement("DIV");
        newWord.className = "word";
        newWord.contentEditable = true;

        newWord.addEventListener("focus", function() {
            this.parentElement.querySelector(".save-button").classList.remove("saved")
        })

        newWord.addEventListener("blur", function() { save() })

        newClue = document.createElement("DIV");
        newClue.className = "clue";
        newClue.contentEditable = true;

        newClue.addEventListener("focus", function() {
            this.parentElement.querySelector(".save-button").classList.remove("saved")
        })

        newClue.addEventListener("blur", function() { save() })

        newCloseButton = document.createElement("DIV")
        newCloseButton.innerText = "×"
        newCloseButton.className = "crossword-word-clue-close"
        newCloseButton.addEventListener("click",function() {
            this.parentElement.remove()
            save()
        })

        newSaveButton = document.createElement("BUTTON")
        newSaveButton.className = "save-button";
        newSaveButton.addEventListener("click", function() { save(this) })

        newWordAndClue.appendChild(newWord)
        newWordAndClue.appendChild(newClue)
        newWordAndClue.appendChild(newSaveButton)
        newWordAndClue.appendChild(newCloseButton)

        crosswordWordlist.appendChild(newWordAndClue)

    })

    generateButton = document.getElementById("generate-button");

    generateButton.addEventListener("click", function() {

    document.querySelector("#score-modal p").innerHTML = ""

    save()

        if (localStorage.crosswordTitle && localStorage.crosswordPasscode && localStorage.crosswordInput) {

            title = JSON.parse(localStorage.crosswordTitle)
            passcode = JSON.parse(localStorage.crosswordPasscode)
            input = JSON.parse(localStorage.crosswordInput)

            if (Object.keys(input).length > 1 && title != "" && passcode != "") {

                generate(title, passcode, input, true)

                hide()

            } else if (title == "" || passcode == "") {
                crossword.innerHTML = ""
                document.querySelector("#score-modal").parentElement.style.display = "flex";
                document.querySelector("#score-modal p").style.display = "block";

                document.querySelector("#score-modal p").innerHTML = "Provide a title and a passcode."
            } else if (Object.keys(input).length < 2) {
                crossword.innerHTML = ""
                document.querySelector("#score-modal").parentElement.style.display = "flex";
                document.querySelector("#score-modal p").style.display = "block";

                document.querySelector("#score-modal p").innerHTML = "Provide words and clues."
            }

        }

    })
    </script>

<script src="/projects/crossword-puzzle-generator/crossword-functions.js"></script>
        </div>
        
        
    </div>
</body>

</html>