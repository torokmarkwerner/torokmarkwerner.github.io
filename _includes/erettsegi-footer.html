<div id="erettsegi-footer">

<div class="question">{{ question }}</div>

<div class="answer">Search 600 tasks using keywords</div>

<div class="search-bar-container">
    <form class="search-form">
        <input type="text" placeholder="Search 600 tasks using keywords" class="search-input">
        <button type="button" class="search-button">
            <i class="fa fa-search"></i>
        </button>
    </form>
</div>

</div>

<script>


if (typeof numberOfTasks === "undefined") {
    fetch("/erettsegi/data.json").then((response, id) => {
        return response.json()
    }).then((data) => {
        jsonData = data;
const numberOfTasks = data.length

answer = document.querySelector("#erettsegi-footer .answer")
answer.innerHTML = "Search " + numberOfTasks + " tasks using keywords"

search = document.querySelector("#erettsegi-footer .search-input")
search.placeholder = "Search " + numberOfTasks + " tasks using keywords"
})
    
} else {
answer = document.querySelector("#erettsegi-footer .answer")
answer.innerHTML = "Search " + numberOfTasks + " tasks using keywords"

search = document.querySelector("#erettsegi-footer .search-input")
search.placeholder = "Search " + numberOfTasks + " tasks using keywords"
}

searchInput = document.querySelector(".search-input")

searchInput.addEventListener("focus",function() {
searchInput.scrollIntoView({ behavior: "smooth" })
})

function searchKeywords() {

keywords = searchInput.value.trim().toLowerCase()

searchUrl = "/erettsegi/search" + (keywords ? "?q=" + encodeURIComponent(keywords) : "")
window.open(searchUrl, "_blank")     

}

searchForm = document.querySelector(".search-form")

searchForm.addEventListener("submit",function(event) {
event.preventDefault();
searchKeywords()
})

searchButton = document.querySelector(".search-button")

searchButton.addEventListener("click",function(event) {
event.preventDefault();
searchKeywords()
})

</script>


